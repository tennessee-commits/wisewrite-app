<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing Challenges - WriteWise</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --deep-slate: #2D3748;
            --warm-coral: #FF6B6B;
            --soft-sage: #68D391;
            --neutral-gray: #718096;
            --light-gray: #F7FAFC;
            --charcoal: #1A202C;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }
        
        .font-display { font-family: 'Playfair Display', serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .challenge-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .challenge-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.1);
        }
        
        .challenge-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1rem;
        }
        
        .challenge-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .challenge-day.completed {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .challenge-day.current {
            background: linear-gradient(135deg, #FF6B6B 0%, #dc2626 100%);
            color: white;
            animation: pulse-current 2s infinite;
        }
        
        .challenge-day.locked {
            background: #f3f4f6;
            color: #9ca3af;
            cursor: not-allowed;
        }
        
        .challenge-day.available {
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 2px solid #e5e7eb;
            color: #374151;
        }
        
        .challenge-day.available:hover {
            border-color: #FF6B6B;
            transform: scale(1.05);
        }
        
        @keyframes pulse-current {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .badge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .badge.locked {
            background: #f3f4f6;
            color: #9ca3af;
        }
        
        .badge.unlocked {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
            to { box-shadow: 0 0 20px rgba(251, 191, 36, 0.8); }
        }
        
        .streak-flame {
            animation: flicker 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes flicker {
            0% { transform: scale(1) rotate(-2deg); }
            100% { transform: scale(1.1) rotate(2deg); }
        }
        
        .nav-blur {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.9);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }
        
        .celebration {
            animation: celebrate 0.6s ease-out;
        }
        
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #FF6B6B;
            animation: confetti-fall 3s linear;
            z-index: 9999;
            pointer-events: none;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="text-gray-800 bg-gray-50">
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-blur border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-r from-red-400 to-green-400 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">W</span>
                    </div>
                    <span class="font-display font-semibold text-xl text-gray-900">WriteWise</span>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="dashboard.html" class="text-gray-600 hover:text-red-400 transition-colors duration-200">Dashboard</a>
                    <a href="assistant.html" class="text-gray-600 hover:text-red-400 transition-colors duration-200">Assistant</a>
                    <a href="challenges.html" class="text-red-400 font-medium">Challenges</a>
                    <a href="index.html#pricing" class="text-gray-600 hover:text-red-400 transition-colors duration-200">Upgrade</a>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="streak-flame text-orange-500">üî•</div>
                        <span class="font-semibold text-gray-700" id="streak-counter">12</span>
                        <span class="text-sm text-gray-500">day streak</span>
                    </div>
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Challenges Header -->
    <section class="pt-24 pb-8 bg-gradient-to-r from-yellow-50 to-orange-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="font-display text-4xl font-bold text-gray-900 mb-4">
                    30-Day Writing Challenge
                </h1>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Build better writing habits with daily challenges designed to improve your skills
                </p>
            </div>
        </div>
    </section>

    <!-- Challenge Dashboard -->
    <section class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Left Panel: Challenge Grid -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="challenge-card p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="font-semibold text-xl text-gray-900">Challenge Progress</h3>
                            <div class="text-sm text-gray-500">Day 12 of 30</div>
                        </div>
                        
                        <!-- 30-Day Challenge Grid -->
                        <div class="challenge-grid mb-6">
                            <!-- Days 1-7 -->
                            <div class="challenge-day completed" data-day="1">1</div>
                            <div class="challenge-day completed" data-day="2">2</div>
                            <div class="challenge-day completed" data-day="3">3</div>
                            <div class="challenge-day completed" data-day="4">4</div>
                            <div class="challenge-day completed" data-day="5">5</div>
                            <div class="challenge-day completed" data-day="6">6</div>
                            <div class="challenge-day completed" data-day="7">7</div>
                            
                            <!-- Days 8-14 -->
                            <div class="challenge-day completed" data-day="8">8</div>
                            <div class="challenge-day completed" data-day="9">9</div>
                            <div class="challenge-day completed" data-day="10">10</div>
                            <div class="challenge-day completed" data-day="11">11</div>
                            <div class="challenge-day current" data-day="12">12</div>
                            <div class="challenge-day available" data-day="13">13</div>
                            <div class="challenge-day locked" data-day="14">14</div>
                            
                            <!-- Days 15-21 -->
                            <div class="challenge-day locked" data-day="15">15</div>
                            <div class="challenge-day locked" data-day="16">16</div>
                            <div class="challenge-day locked" data-day="17">17</div>
                            <div class="challenge-day locked" data-day="18">18</div>
                            <div class="challenge-day locked" data-day="19">19</div>
                            <div class="challenge-day locked" data-day="20">21</div>
                            <div class="challenge-day locked" data-day="21">21</div>
                            
                            <!-- Days 22-28 -->
                            <div class="challenge-day locked" data-day="22">22</div>
                            <div class="challenge-day locked" data-day="23">23</div>
                            <div class="challenge-day locked" data-day="24">24</div>
                            <div class="challenge-day locked" data-day="25">25</div>
                            <div class="challenge-day locked" data-day="26">26</div>
                            <div class="challenge-day locked" data-day="27">27</div>
                            <div class="challenge-day locked" data-day="28">28</div>
                            
                            <!-- Days 29-30 -->
                            <div class="challenge-day locked" data-day="29">29</div>
                            <div class="challenge-day locked" data-day="30">30</div>
                        </div>
                        
                        <!-- Legend -->
                        <div class="flex items-center justify-center space-x-6 text-sm">
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-green-500 rounded"></div>
                                <span class="text-gray-600">Completed</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-red-500 rounded"></div>
                                <span class="text-gray-600">Current</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-gray-200 rounded border-2 border-gray-300"></div>
                                <span class="text-gray-600">Available</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-gray-200 rounded"></div>
                                <span class="text-gray-600">Locked</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Current Challenge -->
                    <div class="challenge-card p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="font-semibold text-xl text-gray-900">Today's Challenge</h3>
                            <div class="text-sm text-red-400 font-medium">Day 12</div>
                        </div>
                        
                        <div id="current-challenge">
                            <div class="mb-4">
                                <h4 class="font-semibold text-lg text-gray-900 mb-2">Hook Mastery</h4>
                                <p class="text-gray-600 mb-4">
                                    Write 3 different opening hooks for the same content idea. Focus on creating compelling first lines that make readers want to continue.
                                </p>
                                
                                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                                    <h5 class="font-semibold text-blue-900 mb-2">Challenge Requirements:</h5>
                                    <ul class="text-sm text-blue-800 space-y-1">
                                        <li>‚Ä¢ Create 3 distinct hook styles (question, bold statement, curiosity)</li>
                                        <li>‚Ä¢ Each hook should be under 280 characters</li>
                                        <li>‚Ä¢ Focus on emotional impact or value proposition</li>
                                        <li>‚Ä¢ Test which hook gets the most engagement</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="text-sm text-gray-500">
                                        <span class="font-medium">Time limit:</span> 15 minutes
                                    </div>
                                    <div class="text-sm text-gray-500">
                                        <span class="font-medium">Points:</span> 50 XP
                                    </div>
                                </div>
                                
                                <button id="start-challenge-btn" class="bg-red-400 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200">
                                    Start Challenge
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Challenge History -->
                    <div class="challenge-card p-6 rounded-2xl">
                        <h3 class="font-semibold text-xl text-gray-900 mb-6">Recent Challenges</h3>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="text-2xl">‚úÖ</div>
                                    <div>
                                        <p class="font-semibold text-green-800">Clarity Challenge</p>
                                        <p class="text-sm text-green-600">Day 11 ‚Ä¢ Completed</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-green-800">45 XP</p>
                                    <p class="text-xs text-green-600">Score: 92%</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="text-2xl">‚úÖ</div>
                                    <div>
                                        <p class="font-semibold text-green-800">Engagement Boost</p>
                                        <p class="text-sm text-green-600">Day 10 ‚Ä¢ Completed</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-green-800">40 XP</p>
                                    <p class="text-xs text-green-600">Score: 88%</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="text-2xl">‚úÖ</div>
                                    <div>
                                        <p class="font-semibold text-green-800">Storytelling Basics</p>
                                        <p class="text-sm text-green-600">Day 9 ‚Ä¢ Completed</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-green-800">35 XP</p>
                                    <p class="text-xs text-green-600">Score: 85%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right Panel: Achievements & Stats -->
                <div class="space-y-6">
                    <!-- Achievement Badges -->
                    <div class="challenge-card p-6 rounded-2xl">
                        <h3 class="font-semibold text-lg text-gray-900 mb-6">Achievement Badges</h3>
                        
                        <div class="grid grid-cols-3 gap-4 mb-6">
                            <div class="text-center">
                                <div class="badge unlocked mx-auto mb-2">üèÜ</div>
                                <p class="text-xs text-gray-600">First Week</p>
                            </div>
                            <div class="text-center">
                                <div class="badge unlocked mx-auto mb-2">üî•</div>
                                <p class="text-xs text-gray-600">Streak Starter</p>
                            </div>
                            <div class="text-center">
                                <div class="badge unlocked mx-auto mb-2">‚≠ê</div>
                                <p class="text-xs text-gray-600">High Scorer</p>
                            </div>
                            <div class="text-center">
                                <div class="badge unlocked mx-auto mb-2">üí™</div>
                                <p class="text-xs text-gray-600">Consistent</p>
                            </div>
                            <div class="text-center">
                                <div class="badge locked mx-auto mb-2">üéØ</div>
                                <p class="text-xs text-gray-600">Perfect Week</p>
                            </div>
                            <div class="text-center">
                                <div class="badge locked mx-auto mb-2">üëë</div>
                                <p class="text-xs text-gray-600">Challenge Master</p>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <p class="text-sm text-gray-600">4 of 12 badges unlocked</p>
                        </div>
                    </div>
                    
                    <!-- Progress Stats -->
                    <div class="challenge-card p-6 rounded-2xl">
                        <h3 class="font-semibold text-lg text-gray-900 mb-6">Your Progress</h3>
                        
                        <div class="space-y-4">
                            <div class="text-center mb-6">
                                <div class="relative w-24 h-24 mx-auto mb-2">
                                    <svg class="w-24 h-24 progress-ring">
                                        <circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="6" fill="transparent"/>
                                        <circle cx="48" cy="48" r="40" stroke="#FF6B6B" stroke-width="6" fill="transparent" 
                                                stroke-dasharray="251.33" stroke-dashoffset="150.8" stroke-linecap="round" class="progress-ring-circle"/>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="text-center">
                                            <div class="text-xl font-bold text-gray-900">40%</div>
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-600">Complete</p>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Challenges completed</span>
                                    <span class="font-semibold text-gray-900">12/30</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Total XP earned</span>
                                    <span class="font-semibold text-gray-900">485</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Current streak</span>
                                    <span class="font-semibold text-orange-500">12 days</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Best score</span>
                                    <span class="font-semibold text-green-500">96%</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Average score</span>
                                    <span class="font-semibold text-blue-500">87%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Leaderboard -->
                    <div class="challenge-card p-6 rounded-2xl">
                        <h3 class="font-semibold text-lg text-gray-900 mb-6">Weekly Leaderboard</h3>
                        
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="text-lg">ü•á</div>
                                    <div>
                                        <p class="font-semibold text-sm text-yellow-800">Sarah Chen</p>
                                        <p class="text-xs text-yellow-600">15-day streak</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-yellow-800">620 XP</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="text-lg">ü•à</div>
                                    <div>
                                        <p class="font-semibold text-sm text-gray-800">Marcus J.</p>
                                        <p class="text-xs text-gray-600">14-day streak</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-gray-800">585 XP</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-orange-50 rounded-lg border-2 border-orange-200">
                                <div class="flex items-center space-x-3">
                                    <div class="text-lg">ü•â</div>
                                    <div>
                                        <p class="font-semibold text-sm text-orange-800">You</p>
                                        <p class="text-xs text-orange-600">12-day streak</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-orange-800">485 XP</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="text-sm text-gray-500">#4</div>
                                    <div>
                                        <p class="font-semibold text-sm text-gray-700">Emma R.</p>
                                        <p class="text-xs text-gray-500">10-day streak</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-gray-700">420 XP</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="challenge-card p-6 rounded-2xl">
                        <h3 class="font-semibold text-lg text-gray-900 mb-4">Quick Actions</h3>
                        
                        <div class="space-y-3">
                            <button class="w-full bg-red-400 hover:bg-red-500 text-white py-3 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2">
                                <span>üìù</span>
                                <span>Start Today's Challenge</span>
                            </button>
                            
                            <button class="w-full bg-blue-400 hover:bg-blue-500 text-white py-3 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2">
                                <span>üìä</span>
                                <span>View All Badges</span>
                            </button>
                            
                            <button class="w-full bg-green-400 hover:bg-green-500 text-white py-3 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2">
                                <span>üèÜ</span>
                                <span>Challenge History</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-2 mb-4 md:mb-0">
                    <div class="w-8 h-8 bg-gradient-to-r from-red-400 to-green-400 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">W</span>
                    </div>
                    <span class="font-display font-semibold text-xl">WriteWise</span>
                </div>
                
                <p class="text-gray-400 text-sm">
                    ¬© 2025 WriteWise. All rights reserved. Built for content creators who want to write better.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize challenges page
        document.addEventListener('DOMContentLoaded', function() {
            initChallengeGrid();
            initCurrentChallenge();
            initQuickActions();
            animateProgressRing();
            
            console.log('Challenges initialized with Pi√±ata Protocol üèÜ');
        });

        // Initialize challenge grid interactions
        function initChallengeGrid() {
            const challengeDays = document.querySelectorAll('.challenge-day');
            
            challengeDays.forEach(day => {
                day.addEventListener('click', function() {
                    const dayNumber = this.dataset.day;
                    const status = this.classList.contains('completed') ? 'completed' :
                                  this.classList.contains('current') ? 'current' :
                                  this.classList.contains('available') ? 'available' : 'locked';
                    
                    if (status === 'locked') {
                        showLockedMessage(dayNumber);
                        return;
                    }
                    
                    if (status === 'available' || status === 'current') {
                        startChallenge(dayNumber);
                    }
                    
                    if (status === 'completed') {
                        showCompletedChallenge(dayNumber);
                    }
                    
                    // Animate click
                    anime({
                        targets: this,
                        scale: [1, 0.9, 1],
                        duration: 200,
                        easing: 'easeOutCubic'
                    });
                });
            });
        }

        // Show locked message
        function showLockedMessage(dayNumber) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                    <div class="text-4xl mb-4">üîí</div>
                    <h3 class="font-display text-2xl font-bold text-gray-900 mb-2">Challenge Locked</h3>
                    <p class="text-gray-600 mb-6">Complete Day ${parseInt(dayNumber) - 1} to unlock this challenge. Keep up the great work!</p>
                    <button class="bg-red-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-500 transition-colors duration-200" 
                            onclick="this.parentElement.parentElement.remove()">
                        Keep Going!
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            anime({
                targets: modal.querySelector('div'),
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutBack'
            });
        }

        // Start challenge
        function startChallenge(dayNumber) {
            const challenges = {
                12: {
                    title: "Hook Mastery",
                    description: "Write 3 different opening hooks for the same content idea.",
                    requirements: [
                        "Create 3 distinct hook styles (question, bold statement, curiosity)",
                        "Each hook should be under 280 characters",
                        "Focus on emotional impact or value proposition",
                        "Test which hook gets the most engagement"
                    ],
                    timeLimit: "15 minutes",
                    points: "50 XP"
                },
                13: {
                    title: "Clarity Challenge",
                    description: "Rewrite a complex idea using simple language that anyone can understand.",
                    requirements: [
                        "Choose a technical or complex topic",
                        "Explain it using only common words",
                        "Keep sentences under 15 words",
                        "Use analogies or examples"
                    ],
                    timeLimit: "20 minutes",
                    points: "45 XP"
                }
            };
            
            const challenge = challenges[dayNumber];
            if (!challenge) {
                showComingSoon();
                return;
            }
            
            // Update current challenge display
            const challengeContainer = document.getElementById('current-challenge');
            challengeContainer.innerHTML = `
                <div class="mb-4">
                    <h4 class="font-semibold text-lg text-gray-900 mb-2">${challenge.title}</h4>
                    <p class="text-gray-600 mb-4">${challenge.description}</p>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <h5 class="font-semibold text-blue-900 mb-2">Challenge Requirements:</h5>
                        <ul class="text-sm text-blue-800 space-y-1">
                            ${challenge.requirements.map(req => `<li>‚Ä¢ ${req}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="text-sm text-gray-500">
                            <span class="font-medium">Time limit:</span> ${challenge.timeLimit}
                        </div>
                        <div class="text-sm text-gray-500">
                            <span class="font-medium">Points:</span> ${challenge.points}
                        </div>
                    </div>
                    
                    <button class="bg-green-400 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="launchChallenge(${dayNumber})">
                        Launch Challenge
                    </button>
                </div>
            `;
            
            // Scroll to current challenge
            challengeContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Highlight selected day
            document.querySelectorAll('.challenge-day').forEach(day => {
                day.classList.remove('ring-4', 'ring-red-400');
            });
            document.querySelector(`[data-day="${dayNumber}"]`).classList.add('ring-4', 'ring-red-400');
        }

        // Launch challenge
        function launchChallenge(dayNumber) {
            // Simulate challenge launch
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-2xl mx-4 w-full">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üöÄ</div>
                        <h3 class="font-display text-2xl font-bold text-gray-900 mb-2">Challenge Started!</h3>
                        <p class="text-gray-600">Your writing challenge is now active. Complete it to earn XP and unlock the next challenge.</p>
                    </div>
                    
                    <div class="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 class="font-semibold text-gray-900 mb-4">Challenge Interface</h4>
                        <p class="text-sm text-gray-600 mb-4">You would be redirected to a dedicated challenge interface with:</p>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li>‚Ä¢ Built-in writing editor with real-time feedback</li>
                            <li>‚Ä¢ Challenge-specific prompts and guidelines</li>
                            <li>‚Ä¢ Timer and progress tracking</li>
                            <li>‚Ä¢ Instant scoring and feedback</li>
                            <li>‚Ä¢ Submission and sharing options</li>
                        </ul>
                    </div>
                    
                    <div class="flex justify-center space-x-4">
                        <button class="bg-red-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-500 transition-colors duration-200" 
                                onclick="completeChallenge(${dayNumber})">
                            Complete Challenge
                        </button>
                        <button class="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-semibold hover:border-red-400 hover:text-red-400 transition-colors duration-200" 
                                onclick="this.parentElement.parentElement.parentElement.remove()">
                            Cancel
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            anime({
                targets: modal.querySelector('div'),
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutBack'
            });
        }

        // Complete challenge
        function completeChallenge(dayNumber) {
            // Remove modal
            document.querySelector('.fixed.inset-0').remove();
            
            // Trigger celebration
            triggerConfetti();
            
            // Show completion modal
            const completionModal = document.createElement('div');
            completionModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            completionModal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                    <div class="text-6xl mb-4">üéâ</div>
                    <h3 class="font-display text-2xl font-bold text-gray-900 mb-2">Challenge Completed!</h3>
                    <p class="text-gray-600 mb-6">Congratulations! You've earned 50 XP and unlocked the next challenge.</p>
                    
                    <div class="bg-green-50 p-4 rounded-lg mb-6">
                        <div class="text-2xl font-bold text-green-800 mb-1">92%</div>
                        <p class="text-sm text-green-600">Excellent score!</p>
                    </div>
                    
                    <button class="bg-green-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-500 transition-colors duration-200" 
                            onclick="this.parentElement.parentElement.remove(); updateChallengeProgress(${dayNumber})">
                        Continue
                    </button>
                </div>
            `;
            
            document.body.appendChild(completionModal);
            
            anime({
                targets: completionModal.querySelector('div'),
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutBack'
            });
        }

        // Update challenge progress
        function updateChallengeProgress(completedDay) {
            const nextDay = completedDay + 1;
            
            // Update current challenge display
            const challengeContainer = document.getElementById('current-challenge');
            challengeContainer.innerHTML = `
                <div class="text-center py-8">
                    <div class="text-4xl mb-4">‚úÖ</div>
                    <h4 class="font-semibold text-lg text-gray-900 mb-2">Challenge Completed!</h4>
                    <p class="text-gray-600 mb-4">Great work! Check back tomorrow for the next challenge.</p>
                    <button class="bg-green-400 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="window.location.href='assistant.html'">
                        Continue Writing
                    </button>
                </div>
            `;
            
            // Update challenge grid
            document.querySelector(`[data-day="${completedDay}"]`).classList.remove('current');
            document.querySelector(`[data-day="${completedDay}"]`).classList.add('completed');
            
            if (document.querySelector(`[data-day="${nextDay}"]`)) {
                document.querySelector(`[data-day="${nextDay}"]`).classList.remove('locked');
                document.querySelector(`[data-day="${nextDay}"]`).classList.add('available');
                document.querySelector(`[data-day="${nextDay}"]`).classList.add('current');
            }
        }

        // Initialize current challenge
        function initCurrentChallenge() {
            const startButton = document.getElementById('start-challenge-btn');
            
            startButton.addEventListener('click', function() {
                launchChallenge(12);
                
                // Animate button
                anime({
                    targets: this,
                    scale: [1, 0.95, 1],
                    duration: 200,
                    easing: 'easeOutCubic'
                });
            });
        }

        // Initialize quick actions
        function initQuickActions() {
            const actionButtons = document.querySelectorAll('.challenge-card button');
            
            actionButtons.forEach(button => {
                if (button.textContent.includes('Start Today')) {
                    button.addEventListener('click', () => launchChallenge(12));
                } else if (button.textContent.includes('All Badges')) {
                    button.addEventListener('click', () => showComingSoon('All Badges'));
                } else if (button.textContent.includes('History')) {
                    button.addEventListener('click', () => showComingSoon('Challenge History'));
                }
            });
        }

        // Animate progress ring
        function animateProgressRing() {
            const progressCircle = document.querySelector('.progress-ring-circle');
            if (!progressCircle) return;

            const circumference = 2 * Math.PI * 40; // radius = 40
            const targetPercentage = 40; // 40% complete
            const offset = circumference - (targetPercentage / 100) * circumference;

            setTimeout(() => {
                anime({
                    targets: progressCircle,
                    strokeDashoffset: offset,
                    duration: 2000,
                    easing: 'easeOutCubic'
                });
            }, 500);
        }

        // Trigger confetti celebration
        function triggerConfetti() {
            for (let i = 0; i < 50; i++) {
                createConfettiParticle();
            }
        }

        // Create confetti particle
        function createConfettiParticle() {
            const particle = document.createElement('div');
            particle.className = 'confetti';
            particle.style.left = Math.random() * 100 + 'vw';
            particle.style.backgroundColor = ['#FF6B6B', '#68D391', '#FFD93D', '#6BCF7F'][Math.floor(Math.random() * 4)];
            
            document.body.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 3000);
        }

        // Show coming soon modal
        function showComingSoon(feature) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                    <div class="text-4xl mb-4">üöÄ</div>
                    <h3 class="font-display text-2xl font-bold text-gray-900 mb-2">${feature}</h3>
                    <p class="text-gray-600 mb-6">This feature is coming soon! We're working hard to bring you the best writing challenges experience.</p>
                    <button class="bg-red-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-500 transition-colors duration-200" 
                            onclick="this.parentElement.parentElement.remove()">
                        Got it!
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            anime({
                targets: modal.querySelector('div'),
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutBack'
            });
        }

        // Show completed challenge
        function showCompletedChallenge(dayNumber) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                    <div class="text-4xl mb-4">‚úÖ</div>
                    <h3 class="font-display text-2xl font-bold text-gray-900 mb-2">Day ${dayNumber} Completed</h3>
                    <p class="text-gray-600 mb-6">You completed this challenge with an excellent score! Great work.</p>
                    <button class="bg-green-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-500 transition-colors duration-200" 
                            onclick="this.parentElement.parentElement.remove()">
                        Awesome!
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            anime({
                targets: modal.querySelector('div'),
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutBack'
            });
        }

        // Pi√±ata Protocol surprises
        setTimeout(() => {
            if (Math.random() < 0.4) {
                showChallengeTip();
            }
        }, 5000);

        function showChallengeTip() {
            const tips = [
                "üèÜ Complete challenges to unlock new badges and features!",
                "üî• Maintain your streak for bonus XP and special rewards!",
                "‚≠ê Aim for high scores to climb the leaderboard!",
                "üí™ Consistency is key - even small daily improvements add up!",
                "üéØ Challenge yourself with harder exercises as you progress!"
            ];
            
            const tip = tips[Math.floor(Math.random() * tips.length)];
            
            const tipElement = document.createElement('div');
            tipElement.className = 'fixed top-20 right-4 bg-white border border-gray-200 rounded-lg p-4 shadow-lg z-50 max-w-sm';
            tipElement.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="text-2xl">üí°</div>
                    <div>
                        <p class="font-semibold text-gray-900 mb-1">Challenge Tip!</p>
                        <p class="text-sm text-gray-600">${tip}</p>
                    </div>
                </div>
                <button class="absolute top-2 right-2 text-gray-400 hover:text-gray-600" onclick="this.parentElement.remove()">
                    <span class="text-lg">√ó</span>
                </button>
            `;
            
            document.body.appendChild(tipElement);
            
            setTimeout(() => {
                if (tipElement.parentNode) {
                    tipElement.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>